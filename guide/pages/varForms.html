<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>4.5 Generating forms from Variable definitions 1.7-SNAPSHOT</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/overview.html"><strong>1</strong><span>Overview</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/installation.html"><strong>2</strong><span>Configuration and installation</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/usersGuide.html"><strong>3</strong><span>User's Guide</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/developersGuide.html"><strong>4</strong><span>Developer's Guide</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/faq.html"><strong>5</strong><span>Frequently Asked Questions</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/glossary.html"><strong>6</strong><span>Glossary</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>jCatalog Software AG</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/usersGuide.html">&lt;&lt; <strong>3</strong><span>User's Guide</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/faq.html"><strong>5</strong><span>Frequently Asked Questions</span> >></a></div>
                


                <div class="project">
                    <h1>4.5 Generating forms from Variable definitions - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Stephan Albers, July Antonicheva</p>

                    <p><strong>Version:</strong> 1.7-SNAPSHOT</p>

                    
                </div>

                

                

<h2 id="varForms">4.5 Generating forms from Variable definitions</h2>
<strong class="bold">Types of Forms</strong><p class="paragraph"/>Grailsflow supports automatic execution of nodes and manual user input. Workflows often need the user to make decisions
or give input to the process.<p class="paragraph"/>GrailsFlow has functions for worklist management integrated. Whenever a process designer specifies a wait node, the
execution of the process stops when reaching that node. The node becomes visible in the worklist of the user that is
currently assigned to that process node.<p class="paragraph"/>When he clicks on the node there are three possible interactions:
<ul class="star">
<li> <strong class="bold">automatic form:</strong> the user sees all process variables that the process designer has given read access to. He can enter</li>
</ul><p class="paragraph"/>values for variables. GrailsFlow also shows buttons for all events/transitions that leave the node, so the user can
decide which transition to take by clicking on the button.
<ul class="star">
<li> <strong class="bold">manual form:</strong> GrailsFlow allows to upload forms that have been defined manually. These forms are shown instead of the</li>
</ul><p class="paragraph"/>automatically generated form.
<ul class="star">
<li> <strong class="bold">manual forms and controller:</strong> This allows process designers to define their own forms management and their own</li>
</ul><p class="paragraph"/>controllers. This is the most flexible way of interacting with the user; however it is also the biggest effort.
Controller can deal with process variables or other Grails components and can also span multiple pages using the Grails
WebFlow functionality.<p class="paragraph"/><strong class="bold">Create a Form</strong><p class="paragraph"/>In the Process Editor under Process Nodes, click the "Add" button to create a node.<p class="paragraph"/>Enter Node ID and select type as 'Wait' to display the visibility section. Define the visibility for each of the
variables (INVISIBLE, READ_ONLY, REQUIRED and WRITE_READ). Select form generation as - "Use Automatic Form" and click
the "Save" button.<p class="paragraph"/>The user interface form is auto generated as below.<p class="paragraph"/><img border="0" class="center" src="../img/developersGuide/varForms_1.jpg"></img><p class="paragraph"/>The user interface form is auto generated as below.<p class="paragraph"/><img border="0" class="center" src="../img/developersGuide/varForms_2.jpg"></img><p class="paragraph"/>To create a manual form, select Use Custom Form, a text box appears for entering html code for the form. Enter the
manual form code and click button 'Generate'<p class="paragraph"/><img border="0" class="center" src="../img/developersGuide/varForms_3.jpg"></img><p class="paragraph"/>
To create a manual form with a controller select the option Use Custom Controller and Form and enter the code for
Manual form and controller and click button 'Generate'<p class="paragraph"/><img border="0" class="center" src="../img/developersGuide/varForms_4.jpg"></img><p class="paragraph"/><p class="paragraph"/>If the editor is an external one, select Use External Editor option and enter the URL for the same.<p class="paragraph"/><img border="0" class="center" src="../img/developersGuide/varForms_5.jpg"></img><p class="paragraph"/>
 Example:
<ul class="star">
<li>Views Section</li>
<ul class="star">
<li>size</li>
<li>widget</li>
<li>rows</li>
<li>cols</li>
<li>styleClass</li>
<li>template</li>
<li>displayKey</li>
<li>remoteFields</li>
<li>dateFormat</li>
<li>restriction</li>
</ul>
<li>Descriptions Section</li>
<ul class="star">
<li>description_(en|de|fr|...)</li>
<li>label_(en|de|fr|...)</li>
</ul>
<li>Constraints Section</li>
<ul class="star">
<li>required</li>
</ul></ul><p class="paragraph"/>Example:<p class="paragraph"/><div class="code"><pre>class AutoFormsGenerationTestProcess &#123;
    <span class="java&#45;keyword">public</span> <span class="java&#45;object">String</span>  productId
    <span class="java&#45;keyword">public</span> Link userSite
    <span class="java&#45;keyword">public</span> Address address
    <span class="java&#45;keyword">public</span> <span class="java&#45;object">String</span> commentary<p class="paragraph"/> 
    <span class="java&#45;keyword">static</span> views = &#123;
        // the order of fields is taken into account when form auto generates,
        // <span class="java&#45;keyword">if</span> the property is not specified in <span class="java&#45;keyword">this</span> section it will be displayed
        // below specified properties<p class="paragraph"/>        address(widget: <span class="java&#45;quote">"externalSearch"</span>, template: <span class="java&#45;quote">"search/address.gsp"</span>,
        displayKey: <span class="java&#45;quote">"addressID"</span>, remoteFields: <span class="java&#45;quote">"name1,city"</span>)
        commentary(widget: <span class="java&#45;quote">"textarea"</span>)
        productId(size:35)
    &#125;<p class="paragraph"/> 
    <span class="java&#45;keyword">static</span> descriptions = &#123;
        AutoFormsGenerationTest(description_en: <span class="java&#45;quote">"<span class="java&#45;object">Process</span> workflow shows automatic forms generation."</span>,
        description_de: <span class="java&#45;quote">"<span class="java&#45;object">Process</span> workflow shows automatic forms generation."</span>)
        address(description_en: <span class="java&#45;quote">"You can specify address here."</span>, description_de: <span class="java&#45;quote">"You can specify address here."</span>,
        label_en: <span class="java&#45;quote">"Address"</span>, label_de: <span class="java&#45;quote">"Address"</span>)
        productId(label_en: <span class="java&#45;quote">"Product ID"</span>, label_de: <span class="java&#45;quote">"Product ID"</span>)
   &#125;<p class="paragraph"/> 
   <span class="java&#45;keyword">static</span> constraints = &#123;
       productId(required:<span class="java&#45;keyword">true</span>)
       address(required:<span class="java&#45;keyword">true</span>)
   &#125;</pre></div><p class="paragraph"/>
<strong class="bold">Grailsflow Auto Forms Generation</strong><p class="paragraph"/><strong class="bold">size</strong><p class="paragraph"/>Usage: Uses a value to restrict the size of property input field
Example:
<div class="code"><pre>productID(size: 35)</pre></div><p class="paragraph"/><strong class="bold">widget</strong><p class="paragraph"/>Usage: specifies the widget that represents this process variable property,
Possible values:
<ol>
<li>textarea</li>
<li>externalSearch</li>
<li>list</li>
</ol><p class="paragraph"/>Example:
<div class="code"><pre>commentary(widget: <span class="java&#45;quote">"textarea"</span>)
address(widget: <span class="java&#45;quote">"externalSearch"</span>)<p class="paragraph"/>status(widget: <span class="java&#45;quote">"list"</span>)</pre></div><p class="paragraph"/><strong class="bold">External Search:</strong>  If you want to use widget 'externalSearch', it is also important to specify the 'displayKey' and
'template' attributes, because they specify the template and bean property for rendering.<p class="paragraph"/>The mechanism of external search rendering is as follows: property is rendered as readonly input with 'search' and
'clear' link-icons.  By clicking the 'search' link - you see the pop-up window with a 'template' page. It can be the
page with the search form or it can contain the list of all available values for the property and the user has the
option to possibily select one. Then the inputs of the property are pre-selected with these values. The requirements
for the template page are:
<ul class="star">
<li> The template before closing should call opener function, the name of this function is available in the template as</li>
</ul><p class="paragraph"/>the 'callbackFunctionName' parameter. Also in the template,  there are some more available parameters, they are: ID0 -
the identifier property of the preselected value. fieldName0 - the property name (process variable name).
<ul class="star">
<li> It is possible to rewrite and create your own function that fills the opener inputs with selected value. But in this</li>
</ul><p class="paragraph"/>case you need to know how the widget Id's are formed.
<ul class="star">
<li> Pay attention how the opener inputs can be filled: if you want to call opener function, you should transmit some</li>
</ul><p class="paragraph"/>params with the function since this is the: 'key' - the identifier property of your selected values and any other
parameters that have the same names as properties of variable (specified as displayKey and remoteFields properties
names), for example: key = 3 - the unique identifier of Address object. addressId = 'MIRAX GROUP' - value of Address
display Key property city = 'London' - the value of city property street= 'Piccadilly' - the value of street property
If you want to fill owner fields with you own JavaScript function, please pay attention how the opener widgits Id's are
formed. The key property with Id '${propertyName}' for opener window, the remoteFields have the following ID structure:<p class="paragraph"/>
${propertyName}_${remoteField}, for example:
<div class="code"><pre>opener.document.getElementById(<span class="java&#45;quote">"address"</span>).value = 3
    opener.document.getElementById(<span class="java&#45;quote">"address_addressId"</span>).value = addressID
    opener.document.getElementById(<span class="java&#45;quote">"address_city"</span>).value = city
    opener.document.getElementById(<span class="java&#45;quote">"address_street"</span>).value = street</pre></div><p class="paragraph"/>List: If you want to use widget 'list', you can also specify 'displayKey' and 'restriction' attributes.<p class="paragraph"/><strong class="bold">rows</strong><p class="paragraph"/>Usage: defines the number of rows for textarea widget
Example:
<div class="code"><pre>commentary(rows: 10)</pre></div><p class="paragraph"/><strong class="bold">cols</strong><p class="paragraph"/>Usage: defines the number of columns for textarea widget
Example:
<div class="code"><pre>commentary(cols: 50)</pre></div><p class="paragraph"/><strong class="bold">styleClass</strong><p class="paragraph"/>Usage: defines which style class should be applied for widget
Example:
<div class="code"><pre>productId(styleClass: <span class="java&#45;quote">"productEntry"</span>)</pre></div><p class="paragraph"/><strong class="bold">template</strong><p class="paragraph"/>Usage: this property is important for externalSearch, it describes path to template that will use for external search
Example:
<div class="code"><pre>address(template: <span class="java&#45;quote">"search/address.gsp"</span>)</pre></div><p class="paragraph"/><strong class="bold">displayKey</strong><p class="paragraph"/>Usage: this property is important for externalSearch and list widgets, if it's specified then selected value is represented by this property of bean.
Example:
<div class="code"><pre>address(displayKey: <span class="java&#45;quote">"addressId"</span>)</pre></div><p class="paragraph"/><strong class="bold">remoteFields</strong><p class="paragraph"/>Usage: this property is important for externalSearch, the properties names are comma-separated, specifies additional fields which are displayed on UI
Example:
<div class="code"><pre>address(remoteFields: <span class="java&#45;quote">"city, street"</span>)</pre></div><p class="paragraph"/><strong class="bold">dateFormat</strong><p class="paragraph"/>Usage: can be useful for properties of type Date, there we can specify the pattern for date, e.g. 'y-m-d H:i:s'
Example:
<div class="code"><pre>startDate(dateFormat: <span class="java&#45;quote">"y&#45;m&#45;d H:i:s"</span>)</pre></div><p class="paragraph"/><strong class="bold">restriction</strong><p class="paragraph"/>Usage: can be useful if you specify widget list. In this case in restriction input you can write restrictions for list values.
Example:
<div class="code"><pre>address(widget: <span class="java&#45;quote">"list"</span>, restriction: <span class="java&#45;quote">"address.city = 'Berlin'"</span>)</pre></div><p class="paragraph"/>It means that in list should be shown only addresses with property City ='Berlin'<p class="paragraph"/><strong class="bold">description</strong><p class="paragraph"/>Usage: specifies the description for process or process variable property
Example:
<div class="code"><pre>commentary(description_en: <span class="java&#45;quote">"Put your commentary here."</span>, description_de: <span class="java&#45;quote">"Put your commentary here."</span>)</pre></div><p class="paragraph"/><strong class="bold">label</strong><p class="paragraph"/>Usage: specifies the label for property or node event
Example:
<div class="code"><pre>catalogId(label_en: <span class="java&#45;quote">"Product Catalog ID"</span>, lable_de: <span class="java&#45;quote">"Product Catalog ID"</span>)<p class="paragraph"/>Set(label_en: <span class="java&#45;quote">"Set Values"</span>, label_de: <span class="java&#45;quote">"Set Values"</span>)</pre></div><p class="paragraph"/><strong class="bold">required</strong><p class="paragraph"/>Usage: set to true if the property value is required
Example:
<div class="code"><pre>productId(required:<span class="java&#45;keyword">true</span>)</pre></div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/usersGuide.html">&lt;&lt; <strong>3</strong><span>User's Guide</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/faq.html"><strong>5</strong><span>Frequently Asked Questions</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    jCatalog Software AG
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
