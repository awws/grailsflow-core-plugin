<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>2 Configuration and installation 1.6</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/overview.html"><strong>1</strong><span>Overview</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/installation.html"><strong>2</strong><span>Configuration and installation</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/usersGuide.html"><strong>3</strong><span>User's Guide</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/developersGuide.html"><strong>4</strong><span>Developer's Guide</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/faq.html"><strong>5</strong><span>Frequently Asked Questions</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/glossary.html"><strong>6</strong><span>Glossary</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>jCatalog Software AG</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/overview.html">&lt;&lt; <strong>1</strong><span>Overview</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/usersGuide.html"><strong>3</strong><span>User's Guide</span> >></a></div>
                


                <div class="project">
                    <h1>2 Configuration and installation - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Stephan Albers, July Antonicheva</p>

                    <p><strong>Version:</strong> 1.6</p>

                    
                </div>

                

                

<h1 id="installation">2 Configuration and installation</h1>
Add the plugin as a dependency to your application by directly editing your BuildConfig.groovy to look like this:<p class="paragraph"/><div class="code"><pre>&#8230;
    plugins &#123;
        &#8230;
        compile ':grailsflow:1.6'
    &#125;</pre></div><p class="paragraph"/><strong class="bold">Grailsflow plugin needs to be configured</strong><p class="paragraph"/>There is a list of Spring beans that can/should be configured in your application, if it uses the Grailsflow plugin.<p class="paragraph"/>The following configuration (common beans) are already configured in GrailsflowGrailsPlugin.groovy and have default
values. You can change the default configuration by specifying new beans values in any Spring configuration file.
<ol>
<li>Common beans:</li>
</ol><p class="paragraph"/>Also, it is possible to define some extra beans, like 'additionalWorklistColumns' and 'processLogDir'. They don't have a
default configuration, but can be easily defined in the Spring configuration of the application, like:<p class="paragraph"/><div class="code"><pre>&#60;!&#45;&#45; Necessary <span class="java&#45;keyword">for</span> uploading files. &#45;&#45;&#62;
    bean (org.springframework.web.multipart.commons.CommonsMultipartResolver) &#123;
        maxUploadSize(1000000)
    &#125;<p class="paragraph"/>    &#60;!&#45;&#45; Default workarea configuration. The class should implement com.jcatalog.grailsflow.workarea.WorkareaPathProvider &#45;&#45;&#62;
    workareaPathProvider(com.jcatalog.grailsflow.workarea.GrailsflowPathProvider) &#123;
        resourcesPath = <span class="java&#45;quote">"workarea"</span>
        resourcesUrl = <span class="java&#45;quote">"/workarea"</span>
    &#125;<p class="paragraph"/>    &#60; !&#45;&#45; Path (folder) <span class="java&#45;keyword">for</span> process scripts. The path is relative to workarea resources path &#45;&#45;&#62;
    processesPath(java.lang.<span class="java&#45;object">String</span>, <span class="java&#45;quote">"processes"</span>)<p class="paragraph"/>    &#60;!&#45;&#45; Path (folder) <span class="java&#45;keyword">for</span> actions scripts. The path is relative to workarea resources path &#45;&#45;&#62;
    actionsPath(java.lang.<span class="java&#45;object">String</span>, <span class="java&#45;quote">"actions"</span>)<p class="paragraph"/>    &#60; !&#45;&#45; Root path (folder) <span class="java&#45;keyword">for</span> stored documents. The path is relative to workarea resources path &#45;&#45;&#62;
    documentsPath(java.lang.<span class="java&#45;object">String</span>, <span class="java&#45;quote">"documents"</span>)<p class="paragraph"/>    &#60; !&#45;&#45; Root path (folder) <span class="java&#45;keyword">for</span> callback scripts. The path is relative to workarea resources path &#45;&#45;&#62;
    callbacksPath(java.lang.<span class="java&#45;object">String</span>, <span class="java&#45;quote">"callbacks"</span>)<p class="paragraph"/>    &#60; !&#45;&#45; Default scripts configuration. The class should implement com.jcatalog.grailsflow.workarea.ScriptsProvider &#45;&#45;&#62;
    scriptsProvider(com.jcatalog.grailsflow.workarea.GrailsflowWorkareaScriptsProvider) &#123;
        workareaPathProvider = ref('workareaPathProvider')
    &#125;  
    &#60; !&#45;&#45; Default configuration <span class="java&#45;keyword">for</span> threads quantity (threads that can be running concurrently) &#45;&#45;&#62;
    maxThreadsQuantity(java.lang.<span class="java&#45;object">Integer</span>, <span class="java&#45;quote">"10"</span>)<p class="paragraph"/>    &#60; !&#45;&#45; Default configuration <span class="java&#45;keyword">for</span> quantity of restricted processes that used in SQL 'in' clause &#45;&#45;&#62;
    maxRestrictedProcesses(java.lang.<span class="java&#45;object">Integer</span>, <span class="java&#45;quote">"2000"</span>)<p class="paragraph"/>    &#60; !&#45;&#45; Default value <span class="java&#45;keyword">for</span> external application ID. It's an Application ID or name of external application: 
     especially important <span class="java&#45;keyword">if</span> there are several applications which share the DB 
     but have Grailsflow plugin installed in both of them. In <span class="java&#45;keyword">this</span> <span class="java&#45;keyword">case</span> Grailsflow Engine  
     needs to know with which application it currently works. Can have an empty value! &#45;&#45;&#62;
    appExternalID(java.lang.<span class="java&#45;object">String</span>, <span class="java&#45;quote">"grailsflow"</span>)<p class="paragraph"/>    &#60; !&#45;&#45; Default format patterns &#45;&#45;&#62;
    datePatterns(java.util.HashMap, &#91;'en':'MM/dd/yyyy', 'de':'dd.MM.yyyy'&#93;) 
    dateTimePatterns(java.util.HashMap, &#91;'en':'MM/dd/yy HH:mm', 'de':'dd.MM.yy HH:mm'&#93;) 
    numberPatterns(java.util.HashMap, &#91;'en':'0.00', 'de':'0.00'&#93;) 
    decimalSeparators(java.util.HashMap, &#91;'en':'.', 'de':','&#93;)<p class="paragraph"/>    &#60; !&#45;&#45; bean allows worklist filtering.
      NOTE: <span class="java&#45;keyword">if</span> set to TRUE &#45; it can cause problems with performance
      in <span class="java&#45;keyword">case</span> of large amount of items. &#45;&#45;&#62;
    isWorklistFilterAvailable(java.lang.<span class="java&#45;object">Boolean</span>, <span class="java&#45;object">Boolean</span>.TRUE)</pre></div><p class="paragraph"/>    Also, it is possible to define some extra beans, like 'additionalWorklistColumns'
    and 'processLogDir'. They haven't default configuration, but can be easily defined
    in Spring configuration of application, like: 
<div class="code"><pre>&#60; !&#45;&#45; here you can specify additional columns in worklist, also these properties will
       be available in worklist filtering &#45;&#45;&#62;  
     &#60;bean id=<span class="java&#45;quote">"additionalWorklistColumns"</span> class=<span class="java&#45;quote">"java.util.ArrayList"</span>&#62;
        &#60;constructor&#45;arg&#62;
          &#60;list&#62;
            &#60;value&#62;productId&#60;/value&#62;
            &#60;value&#62;name&#60;/value&#62;
            &#60;value&#62;requesterName&#60;/value&#62;
          &#60;/list&#62;
        &#60;/constructor&#45;arg&#62;
    &#60;/bean&#62;<p class="paragraph"/>     &#60; !&#45;&#45; define path <span class="java&#45;keyword">for</span> processes logs &#45;&#45;&#62;
    &#60;bean id=<span class="java&#45;quote">"processLogDir"</span> class=<span class="java&#45;quote">"java.lang.<span class="java&#45;object">String</span>"</span>&#62;
      &#60;constructor&#45;arg value=<span class="java&#45;quote">"logs/process/"</span>/&#62;
    &#60;/bean&#62;'<p class="paragraph"/>    &#60; !&#45;&#45; process post killer handler, should implement class
      com.jcatalog.grailsflow.process.PostKillProcessHandler &#45;&#45;&#62;
    &#60;bean id=<span class="java&#45;quote">"postKillProcessHandler"</span> class=<span class="java&#45;quote">"com.myapp.process.MyKillProcessHandler"</span>/&#62;</pre></div><p class="paragraph"/>2. Security configuration:
<div class="code"><pre>&#60; !&#45;&#45; Default configuration <span class="java&#45;keyword">for</span> securityHelper, should implement com.jcatalog.grailsflow.security.SecurityHelper &#45;&#45;&#62;  
    securityHelper(com.jcatalog.grailsflow.security.GrailsflowSecurityHelper)<p class="paragraph"/>    &#60; !&#45;&#45; Default configuration <span class="java&#45;keyword">for</span> securityHelper, should implement com.jcatalog.grailsflow.security.UsersProvider &#45;&#45;&#62;  
    usersProvider(com.jcatalog.grailsflow.security.GrailsflowUsersProvider)<p class="paragraph"/>    &#60; !&#45;&#45; Default configuration <span class="java&#45;keyword">for</span> securityHelper, should implement com.jcatalog.grailsflow.security.RolesProvider &#45;&#45;&#62;  
    rolesProvider(com.jcatalog.grailsflow.security.GrailsflowRolesProvider)<p class="paragraph"/>    &#60; !&#45;&#45; Default configuration <span class="java&#45;keyword">for</span> securityHelper, should implement com.jcatalog.grailsflow.security.GroupsProvider &#45;&#45;&#62;  
    groupsProvider(com.jcatalog.grailsflow.security.GrailsflowGroupsProvider)</pre></div><p class="paragraph"/>
  3.  Grailsflow engine configuration
    <div class="code"><pre>&#60; !&#45;&#45; Configures actionFactory, should implement com.jcatalog.grailsflow.actions.ActionFactory class &#45;&#45;&#62; 
    actionFactory(com.jcatalog.grailsflow.actions.GrailsflowActionFactory) &#123;
        actionsPath = ref('actionsPath')
        scriptsProvider = ref('scriptsProvider')
    &#125;
     &#60; !&#45;&#45; Default settings <span class="java&#45;keyword">for</span> worklistProvider &#45;&#45;&#62;
    worklistProvider(com.jcatalog.grailsflow.worklist.WorklistProvider) &#123;
        appExternalID = ref('appExternalID')
    &#125;
     &#60; !&#45;&#45; Default settings <span class="java&#45;keyword">for</span> processProvider &#45;&#45;&#62;
    processProvider(com.jcatalog.grailsflow.process.ProcessProvider) &#123;
        appExternalID = ref('appExternalID')
    &#125;<p class="paragraph"/>    &#60; !&#45;&#45; Default settings <span class="java&#45;keyword">for</span> processScriptProvider, should implement class com.jcatalog.grailsflow.process.script.ProcessScriptProvider &#45;&#45;&#62;
    processScriptProvider(com.jcatalog.grailsflow.process.script.GrailsflowProcessScriptProvider) &#123;
        scriptsProvider = ref('scriptsProvider')
        processesPath = ref('processesPath')
    &#125;<p class="paragraph"/>    &#60; !&#45;&#45; Default settings <span class="java&#45;keyword">for</span> cacheManager, should implement class com.jcatalog.grailsflow.cache.CacheManager &#45;&#45;&#62; 
    cacheManager(com.jcatalog.grailsflow.cache.SimpleCacheManager)<p class="paragraph"/>    &#60; !&#45;&#45; Default settings <span class="java&#45;keyword">for</span> processFactory, should implement class com.jcatalog.grailsflow.engine.ProcessFactory &#45;&#45;&#62; 
    processFactory(com.jcatalog.grailsflow.engine.GrailsflowCachingProcessFactory) &#123;
        processScriptProvider = ref('processScriptProvider')
        cacheManager = ref('cacheManager')
    &#125;<p class="paragraph"/>    &#60; !&#45;&#45; Default settings <span class="java&#45;keyword">for</span> nodeExecutor bean &#45;&#45;&#62; 
    nodeExecutor(com.jcatalog.grailsflow.engine.execution.NodeExecutor) &#123;
        actionFactory = ref('actionFactory')
    &#125;</pre></div><p class="paragraph"/>
 4. Validation beans:
  <div class="code"><pre>&#60; !&#45;&#45; Default settings <span class="java&#45;keyword">for</span> process definition validation bean, should implement class    com.jcatalog.grailsflow.validation.Validator &#45;&#45;&#62;
    processDefValidator(com.jcatalog.grailsflow.validation.DefaultProcessDefValidator)<p class="paragraph"/>    &#60; !&#45;&#45; Default settings <span class="java&#45;keyword">for</span> process class validation bean, should implement class   com.jcatalog.grailsflow.validation.Validator &#45;&#45;&#62;
    processClassValidator(com.jcatalog.grailsflow.validation.DefaultProcessClassValidator)</pre></div><p class="paragraph"/>5. Client executor bean:
<div class="code"><pre>&#60;!&#45;&#45; Configuration <span class="java&#45;keyword">for</span> client Executor, the implementation class should extend
      ClientExecutor class. Especially important <span class="java&#45;keyword">if</span> you want to use external calls and
      asynchronous actions in your application. &#45;&#45;&#62;
    clientExecutor(com.jcatalog.grailsflow.client.GrailsflowHTTPClientExecutor)</pre></div><p class="paragraph"/>6. Extention  beans:
<div class="code"><pre>&#60;!&#45;&#45; Configuration <span class="java&#45;keyword">for</span> eventEmailProcessor, should implement
      com.jcatalog.grailsflow.extension.email.EventEmailProcessor <span class="java&#45;keyword">interface</span>. &#45;&#45;&#62;
    eventEmailProcessor(com.jcatalog.grailsflow.extension.email.GrailsflowEventEmailProcessor) &#123;
        processManagerService = ref('processManagerService')
    &#125;</pre></div>
    Extended UI configuration with templates and configurable search parameters:  
<div class="code"><pre>&#60;!&#45;&#45; <span class="java&#45;keyword">default</span> settings <span class="java&#45;keyword">for</span> processListColumns UI &#45;&#45;&#62;
    processTypeSearchProperty(DefaultSearchParameter) &#123;
        name = <span class="java&#45;quote">"type"</span>
        searchTemplate = <span class="java&#45;quote">"/processList/search/type"</span>
    &#125;
    processStatusSearchProperty(DefaultSearchParameter) &#123;
        name = <span class="java&#45;quote">"status"</span>
        searchTemplate = <span class="java&#45;quote">"/processList/search/status"</span>
    &#125;
    startedFromSearchProperty(DateSearchParameter) &#123;
        name = <span class="java&#45;quote">"startedFrom"</span>
        searchTemplate = <span class="java&#45;quote">"/processList/search/date"</span>
    &#125;
    userSearchProperty(DefaultSearchParameter) &#123;
        name = <span class="java&#45;quote">"startUser"</span>
    &#125;
    finishedFromSearchProperty(DateSearchParameter) &#123;
        name = <span class="java&#45;quote">"finishedFrom"</span>
        searchTemplate = <span class="java&#45;quote">"/processList/search/date"</span>
    &#125;
    processListSearchParameters(ListFactoryBean) &#123;
        items = &#91; ref('processTypeSearchProperty'),
                  ref('processStatusSearchProperty'),
                  ref('startedFromSearchProperty'), ref('userSearchProperty'),
                  ref('finishedFromSearchProperty')
        &#93;
    &#125;<p class="paragraph"/>    processTypeDisplayProperty(DefaultDisplayParameter) &#123;
        name = <span class="java&#45;quote">"type"</span>
        displayTemplate = <span class="java&#45;quote">"/processList/display/type"</span>
    &#125;
    processStatusDisplayProperty(DefaultDisplayParameter) &#123;
        name = <span class="java&#45;quote">"status.statusID"</span>
        displayProperty = <span class="java&#45;quote">"status"</span>
        displayTemplate = <span class="java&#45;quote">"/processList/display/status"</span>
    &#125;
    createdOnDisplayProperty(DefaultDisplayParameter) &#123;
        name = <span class="java&#45;quote">"createdOn"</span>
        displayProperty = <span class="java&#45;quote">"createdOn"</span>
        displayTemplate = <span class="java&#45;quote">"/processList/display/dateTime"</span>
    &#125;
    createdByDisplayProperty(DefaultDisplayParameter) &#123;
        name = <span class="java&#45;quote">"createdBy"</span>
        displayProperty = <span class="java&#45;quote">"createdBy"</span>
    &#125;
    activeNodesDisplayProperty(DefaultDisplayParameter) &#123;
        name = <span class="java&#45;quote">"activeNodes"</span>
        sortable = <span class="java&#45;keyword">false</span>
        displayTemplate = <span class="java&#45;quote">"/processList/display/activeNodes"</span>
    &#125;
    finishedOnDisplayProperty(DefaultDisplayParameter) &#123;
        name = <span class="java&#45;quote">"finishedOn"</span>
        displayProperty = <span class="java&#45;quote">"finishedOn"</span>
        displayTemplate = <span class="java&#45;quote">"/processList/display/dateTime"</span>
    &#125;
    processListDisplayParameters(ListFactoryBean) &#123;
        items = &#91; ref('processTypeDisplayProperty'),
                  ref('processStatusDisplayProperty'),
                  ref('createdOnDisplayProperty'), ref('createdByDisplayProperty'),
                  ref(<span class="java&#45;quote">"activeNodesDisplayProperty"</span>),
                  ref('finishedOnDisplayProperty')
        &#93;
    &#125;<p class="paragraph"/>    nodeWorklistColumn(DefaultDisplayParameter) &#123;
        name = <span class="java&#45;quote">"nodeID"</span>
        displayTemplate = <span class="java&#45;quote">"/worklist/display/node"</span>
    &#125;
    externalURLWorklistColumn(DefaultDisplayParameter) &#123;
        name = <span class="java&#45;quote">"externalUrl"</span>
        sortable = <span class="java&#45;keyword">false</span>
        displayTemplate = <span class="java&#45;quote">"/worklist/display/externalUrl"</span>
    &#125;
    ...</pre></div><p class="paragraph"/>(The full list of available beans can be found in the GrailsflowGrailsPlugin.groovy file)<p class="paragraph"/>



                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/overview.html">&lt;&lt; <strong>1</strong><span>Overview</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/usersGuide.html"><strong>3</strong><span>User's Guide</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    jCatalog Software AG
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
